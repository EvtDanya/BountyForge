# BountyForge

## Структура проекта
```
    ├── src
    │   ├── frontend                 /* python пакет, содержащий код ловушки */
    │   │   ├── publishers              /* python пакет, содержащий классы публикаторов (связь с сервером HoneyCorn) */
    │   │   ├── routes                  /* python пакет, содержащий эндпоинты web-приложения */
    │   │   ├── scripts                 /* произвольные скрипты, использующие основной пакет ловушки */
    |   |   |   ├── ...
    │   │   |   ├── run.py              /* python скрипт, использующийся для запуска ловушки, создания исполняемого файла */
    │   ├── bountyforge                 /* python пакет, содержащий код ловушки */
    │   │   ├── modules              /* python пакет, содержащий классы публикаторов (связь с сервером HoneyCorn) */
    │   │   ├── api                  /* python пакет, содержащий эндпоинты web-приложения */
    │   │   ├── core                 /* произвольные скрипты, использующие основной пакет ловушки */
    │   │   ├── scripts                 /* произвольные скрипты, использующие основной пакет ловушки */
    |   |   |   ├── ...
    │   │   |   ├── run.py              /* python скрипт, использующийся для запуска ловушки, создания исполняемого файла */
    │   │   ├── utils                       /* python пакет, содержащий набор утилит, использующихся в приложении */
    │   |   |   ├── ...
    │   │   |   ├── sender.py               /* модуль, содержащий класс отправки событий через публикаторы */
    │   │   |   ├── logging.py              /* модуль, содержащий функции инициализации системы логирования приложения */
    │   ├── backend                 /* python пакет, содержащий код ловушки */
    │   │   ├── publishers              /* python пакет, содержащий классы публикаторов (связь с сервером HoneyCorn) */
    │   │   ├── routes                  /* python пакет, содержащий эндпоинты web-приложения */
    │   │   ├── scripts                 /* произвольные скрипты, использующие основной пакет ловушки */
    |   |   |   ├── ...
    │   │   |   ├── run.py              /* python скрипт, использующийся для запуска ловушки, создания исполняемого файла */
    ├── tests                           /* тесты приложения  */
    ├── build.sh                        /* скрипт сборки дистрибутива ловушки (на примере Ubuntu 20.04) */
    ├── config.yaml.dist                /* шаблон конфигурации ловушки */
    ├── docker-compose.yml              /* конфигурация для запуска ловшуки в docker окружении, содержит конфигурацию rabbitmq сервера */
    ├── docker-example.env              /* пример переменных окружения для использования c docker compose */
    ├── Dockerfile.frontend             /* шаблон для сборки Docker образа */
    ├── Dockerfile.backend              /* шаблон для сборки Docker образа */
    ├── poetry.lock                     /* описание используемых версий python пакетов */
    ├── pyproject.toml                  /* конфигурация python пакета ловушки */
    ├── requirements.txt                /* зависимости ловушки. Используется для установки через pip install */
```

## Варианты запуска

### Docker

Запуск в Docker окружении, позволяет взаимодействовать с локальным redis сервером.

1. Установите последнюю версию docker для Linux, либо Docker Desktop для Windows или MacOS.
2. Создайте файл `.env` в корневой директории шаблона, скопируйте содержимое `docker-example.env` в `.env`.
3. В терминале перейдите в корневую директории шаблона и выполните `docker compose up -d --build`.
4. Изменения в коде `src/bountyforge` будут применены после перезагрузки контейнера с сервисом.


### Python env

1. Создать venv окружение: `python3 -m venv env`
2. Активируйте venv окружение: `source env/bin/activate` (*linux)
3. Установите необходимые зависимости: `python -m pip install -r requirements.txt && poetry install`
4. Скопируйте содержимое `config.yaml.dist` в новый файл `config.yaml`, отредактируйте содержимое
5. Запустите сервис (для полноценной работы требуются сервисы, как при создании через docker-compose):

(*linux)
```bash
PYTHONPATH=$(pwd)/src python3 src/bountyforge/scripts/run.py
```
 
(*windows)
```bash
$env:PYTHONPATH="D:\My\Projects\BountyForge\src"
py .\src\bountyforge\scripts\run.py
```

